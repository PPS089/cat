# Knife4j UI 界面	/doc.html	http://localhost:8080/doc.html
# 原始 JSON 文档	/v3/api-docs	http://localhost:8080/v3/api-docs
# 服务器配置
server:
  port: 8080
  address: 0.0.0.0


spring:
  profiles:
    active: dev
  main:
    allow-circular-references: true
  jackson:
    time-zone: Asia/Shanghai
    date-format: yyyy-MM-dd HH:mm:ss
  datasource:
    driver-class-name: ${pet.datasource.driver-class-name}
    url: ${pet.datasource.url}
    username: ${pet.datasource.username}
    password: ${pet.datasource.password}
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB
  mvc:
    format:
      date: yyyy-MM-dd
      time: HH:mm:ss
      date-time: yyyy-MM-dd HH:mm:ss
  #redis 配置
  data:
    redis:
      host: ${pet.redis.host}
      port: ${pet.redis.port}
      password: ${pet.redis.password}
      database: ${pet.redis.database} 


# ==========================================
# MyBatis-Plus 统一配置 
# ==========================================
mybatis-plus:
  # 1. 基础配置 
  mapper-locations: 
    - classpath*:mapper/*.xml
  type-aliases-package: com.pet.entity
  
  # 2. MyBatis 核心配置
  configuration:
    # 打印 SQL 日志到控制台
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    # 开启驼峰命名转换
    map-underscore-to-camel-case: true
    # 建议同时开启：允许在 Java 代码中设置实体类的属性为 null 
    jdbc-type-for-null: null

  # 3. MyBatis-Plus 增强配置 (MP 独有)
  global-config:
    db-config:
      # 主键 ID 策略
      id-type: auto
      # 逻辑删除配置
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0


# ==========================================
# 日志配置
# ==========================================
logging:
  level:
    com:
      pet:
        mapper: debug
        service: info
        controller: info
      example:
        petservice: debug


# ==========================================
# 宠物项目自定义配置 
# ==========================================
pet:
  jwt:
    user-secret-key: ${pet.jwt.user-secret-key}
    refresh-secret-key: ${pet.jwt.refresh-secret-key}
    user-ttl: ${pet.jwt.user-ttl}
    refresh-ttl: ${pet.jwt.refresh-ttl}
  
  alioss:
    endpoint: ${pet.alioss.endpoint}
    bucket-name: ${pet.alioss.bucket-name}
    region: ${pet.alioss.region}
    url-prefix: ${pet.alioss.url-prefix}
    access-key-id: ${pet.alioss.access-key-id}
    access-key-secret: ${pet.alioss.access-key-secret}
  
#  # 健康提醒清理配置
#  health:
#    reminder:
#      cleanup:
#        # 不同健康类型的过期天数配置
#        expiry-days:
#          default: ${pet.health.reminder.cleanup.expiry-days.default}
#          疫苗接种: ${pet.health.reminder.cleanup.expiry-days.疫苗接种}
#          驱虫: ${pet.health.reminder.cleanup.expiry-days.驱虫}
#          体检: ${pet.health.reminder.cleanup.expiry-days.体检}
#          洗澡: ${pet.health.reminder.cleanup.expiry-days.洗澡}
#        # 归档阈值（过期后多少天归档）
#        archive-threshold-days: ${pet.health.reminder.cleanup.archive-threshold-days}
#        # 是否启用自动删除超长期归档记录
#        enable-deletion: ${pet.health.reminder.cleanup.enable-deletion}
#        # 删除阈值（归档后多少天删除）
#        deletion-threshold-days: ${pet.health.reminder.cleanup.deletion-threshold-days}
