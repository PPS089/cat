import{_ as E}from"./dog-CLIpk0wi.js";import{u as C,h as x,x as U,y as $,z as S,A,E as h,l as I,d as M,c as N,o as B,a as i,t as m,m as e,e as s,w as t,r as g,g as y,_ as F}from"./index-CzjmnDZ-.js";import{s as L}from"./request-Dybetxu6.js";const T=()=>{const{t:l,locale:a}=C(),w=I(),u=x(!1),b=x(a.value),n=x({username:"",phone:"",email:"",password:"",confirmPassword:""}),v=r=>l(r),V=()=>{w.push("/login")},P={username:[{required:!0,message:l("register.usernameRequired"),trigger:"blur"}],phone:[{required:!0,message:l("register.phoneRequired"),trigger:"blur"},{validator:(r,c,o)=>{/^1[3-9]\d{9}$/.test(c)?o():o(new Error(l("register.phoneInvalid")))},trigger:"blur"}],email:[{required:!0,message:l("register.emailRequired"),trigger:"blur"},{validator:(r,c,o)=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)?o():o(new Error(l("register.emailInvalid")))},trigger:"blur"}],password:[{required:!0,message:l("register.passwordRequired"),trigger:"blur"}],confirmPassword:[{required:!0,message:l("register.confirmPasswordRequired"),trigger:"blur"},{validator:(r,c,o)=>{c!==n.value.password?o(new Error(l("register.passwordMismatch"))):o()},trigger:"blur"}]};return{form:n,loading:u,currentLanguage:b,rules:P,User:A,Phone:S,Lock:$,Message:U,login:V,onSubmit:async()=>{if(u.value=!0,!/^1[3-9]\d{9}$/.test(n.value.phone)){h.error(l("register.phoneFormatError")),u.value=!1;return}if(!/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![a-z0-9]+$)\S{6,12}$/.test(n.value.password)){h.error(l("register.passwordFormatError")),u.value=!1;return}try{const r=await L.post("/user",{username:n.value.username,phone:n.value.phone,email:n.value.email,password:n.value.password});r.data.code===200||r.data.code===1?(h.success(l("register.success")),w.push("/login")):h.error(r.data.msg||r.data.message||l("register.error"))}catch(r){h.error(r.response?.data?.message||l("register.error"))}finally{u.value=!1}},t:v}},Z={class:"register-container"},D={class:"register-card"},j={class:"register-left"},G={class:"image-container"},H={class:"image-overlay"},J={class:"welcome-title"},K={class:"welcome-subtitle"},O={class:"register-right"},Q={class:"form-header"},W={class:"form-title"},X={class:"form-subtitle"},Y={class:"form-footer"},ee={class:"login-text"},re=M({__name:"Register",setup(l){const{form:a,loading:w,rules:u,User:b,Phone:n,Lock:v,Message:V,login:P,onSubmit:q,t:r}=T();return(c,o)=>{const _=g("el-icon"),f=g("el-input"),p=g("el-form-item"),z=g("el-button"),R=g("el-form"),k=g("el-link");return B(),N("div",Z,[i("div",D,[i("div",j,[i("div",G,[o[5]||(o[5]=i("img",{src:E,alt:"宠物",class:"register-image"},null,-1)),i("div",H,[i("h1",J,m(e(r)("register.welcomeTitle")),1),i("p",K,m(e(r)("register.welcomeSubtitle")),1)])])]),i("div",O,[i("div",Q,[i("h2",W,m(e(r)("register.createAccount")),1),i("p",X,m(e(r)("register.fillInfo")),1)]),s(R,{model:e(a),rules:e(u),ref:"registerForm","label-width":"0",class:"register-form"},{default:t(()=>[s(p,{prop:"username"},{default:t(()=>[s(f,{modelValue:e(a).username,"onUpdate:modelValue":o[0]||(o[0]=d=>e(a).username=d),placeholder:e(r)("register.usernamePlaceholder"),size:"large"},{prefix:t(()=>[s(_,null,{default:t(()=>[s(e(b))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"phone"},{default:t(()=>[s(f,{modelValue:e(a).phone,"onUpdate:modelValue":o[1]||(o[1]=d=>e(a).phone=d),placeholder:e(r)("register.phonePlaceholder"),size:"large"},{prefix:t(()=>[s(_,null,{default:t(()=>[s(e(n))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"email"},{default:t(()=>[s(f,{modelValue:e(a).email,"onUpdate:modelValue":o[2]||(o[2]=d=>e(a).email=d),placeholder:e(r)("register.emailPlaceholder"),size:"large"},{prefix:t(()=>[s(_,null,{default:t(()=>[s(e(V))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"password"},{default:t(()=>[s(f,{modelValue:e(a).password,"onUpdate:modelValue":o[3]||(o[3]=d=>e(a).password=d),type:"password",placeholder:e(r)("register.passwordPlaceholder"),size:"large","show-password":""},{prefix:t(()=>[s(_,null,{default:t(()=>[s(e(v))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"confirmPassword"},{default:t(()=>[s(f,{modelValue:e(a).confirmPassword,"onUpdate:modelValue":o[4]||(o[4]=d=>e(a).confirmPassword=d),type:"password",placeholder:e(r)("register.confirmPasswordPlaceholder"),size:"large","show-password":""},{prefix:t(()=>[s(_,null,{default:t(()=>[s(e(v))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,null,{default:t(()=>[s(z,{type:"primary",onClick:e(q),size:"large",class:"submit-btn",loading:e(w)},{default:t(()=>[y(m(e(r)("register.submit")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),i("div",Y,[i("p",ee,[y(m(e(r)("register.hasAccount"))+" ",1),s(k,{type:"primary",onClick:e(P),underline:!1},{default:t(()=>[y(m(e(r)("register.loginNow")),1)]),_:1},8,["onClick"])])])])])])}}}),le=F(re,[["__scopeId","data-v-312d6b3c"]]);export{le as default};
