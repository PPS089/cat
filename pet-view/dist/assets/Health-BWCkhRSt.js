import{u as te,h as A,j as oe,I as V,E as k,J as ae,X as le,Y as Z,v as ne,x as ie,c as p,o as m,a as e,z as Y,t as n,l as t,N,Z as O,U as Q,F as G,f as K,g as C,n as x,_ as se,$ as ee}from"./index-DfLUD8D4.js";import{s as j}from"./request-G9cUwcFm.js";import{u as re}from"./user-QLKkhJka.js";import{useThemeStore as ce}from"./theme-DRVhYUr3.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dog-DzFJ_7DI.js";const he=()=>{const{t:d}=te(),o=A([]),v=A([]),y=A(!1),_=A(""),I=A(""),T=A(""),E=A("list"),S=A(!1),b=A(!1),r=oe({healthId:0,pid:0,healthType:"",checkDate:"",description:"",reminderTime:void 0,status:"attention"}),g=()=>{if(v.value.length===0){k.warning(d("noAssociatedPetPleaseAdoptOrFoster"));return}S.value=!0},q=V(()=>o.value.length),P=l=>o.value.filter(s=>s.status===l),z=V(()=>P("attention")),F=V(()=>P("expired")),H=V(()=>P("reminded")),U=V(()=>{let l=o.value;return _.value&&(l=l.filter(s=>s.pid===Number(_.value))),I.value&&(l=l.filter(s=>s.healthType===I.value)),T.value&&(l=l.filter(s=>s.status===T.value)),l.sort((s,a)=>new Date(a.checkDate).getTime()-new Date(s.checkDate).getTime())}),W=V(()=>{const l={};return U.value.forEach(s=>{const a=new Date(s.checkDate).toDateString();l[a]||(l[a]=[]),l[a].push(s)}),l}),D=async()=>{y.value=!0;try{const l=await j.get("/user/health-alerts");await L(),l&&l.data&&Array.isArray(l.data)&&(o.value=l.data.map(s=>({healthId:s.healthId,pid:Number(s.pid),checkDate:s.checkDate,healthType:s.healthType,description:s.description,reminderTime:s.reminderTime,status:s.status,createdAt:s.createdAt,updatedAt:s.updatedAt}))),console.log("å¥åº·è­¦æŠ¥æ•°æ®:",o.value)}catch{k.error(d("api.getPetListFailed")),o.value=[]}finally{y.value=!1}},L=async()=>{try{let l;try{l=await j.get("/user/adoptions",{params:{current_page:1,per_page:100}})}catch(a){k.error(d("api.getAdoptionRecordsFailed")+": "+(a.message||d("unknownError"))),l={success:!1,data:{adoptions:[]}}}l||(l={success:!1,data:{adoptions:[]}});const s=[];if(console.log("é¢†å…»è®°å½•APIå“åº”:",l),l.code===200){const a=l.data?.records??[];console.log("å¤„ç†é¢†å…»è®°å½•æ•°æ®:",a),a.forEach(f=>{f.pid&&s.push({pid:Number(f.pid),name:f.name,species:f.species||"",breed:f.breed})})}console.log("æå–çš„å® ç‰©åˆ—è¡¨:",s),v.value=s}catch(l){console.error(d("api.getPetListFailed"),l),k.error(d("api.getPetListFailed")),v.value=[]}};return{healthAlerts:o,pets:v,loading:y,selectedPet:_,selectedHealthType:I,selectedStatus:T,viewMode:E,showAddModal:S,showEditModal:b,formData:r,totalAlerts:q,attentionAlerts:z,expiredAlerts:F,remindedAlerts:H,filteredAlerts:U,groupedAlerts:W,showAddModalDialog:g,deleteAlert:async l=>{try{await ae.confirm(d("api.confirmDeleteHealthAlert"),d("api.deleteConfirmation"),{confirmButtonText:d("api.confirm"),cancelButtonText:d("api.cancel"),type:"warning"}),await j.delete(`/user/health-alerts/${l}`),await D(),k.success(d("api.deleteSuccess"))}catch(s){s!=="cancel"&&console.error("åˆ é™¤å¥åº·æé†’å¤±è´¥:",s)}},saveAlert:async()=>{try{if(!r.pid){k.error(d("api.pleaseSelectPet"));return}let l=r.checkDate;if(r.checkDate&&r.checkDate.includes("T")){const u=new Date(r.checkDate);l=u.getFullYear()+"-"+String(u.getMonth()+1).padStart(2,"0")+"-"+String(u.getDate()).padStart(2,"0")+" "+String(u.getHours()).padStart(2,"0")+":"+String(u.getMinutes()).padStart(2,"0")+":"+String(u.getSeconds()).padStart(2,"0")}let s=null;if(r.status==="attention"&&r.reminderTime&&r.reminderTime.includes("T")){const u=new Date(r.reminderTime);s=u.getFullYear()+"-"+String(u.getMonth()+1).padStart(2,"0")+"-"+String(u.getDate()).padStart(2,"0")+" "+String(u.getHours()).padStart(2,"0")+":"+String(u.getMinutes()).padStart(2,"0")+":"+String(u.getSeconds()).padStart(2,"0")}const a={pid:r.pid,healthType:r.healthType,checkDate:l,reminderTime:s,status:r.status,description:r.description};let f;r.healthId&&r.healthId>0?f=await j.put(`/user/health-alerts/${r.healthId}`,a):f=await j.post("/user/health-alerts",a),f.data?(k.success(r.healthId?d("api.updateHealthAlertSuccess"):d("api.createHealthAlertSuccess")),S.value=!1,b.value=!1,await D()):k.error(d("api.operationFailed"))}catch(l){console.error(d("api.saveHealthAlertFailed"),l),r.healthId&&r.healthId>0?l.response&&l.response.status===400?k.error(d("api.updateHealthAlertFailed")+": "+(l.response.data?.message||d("common.validationError"))):k.error(d("api.updateHealthAlertFailed")):l.response&&l.response.status===400?k.error(d("api.saveHealthAlertFailed")+": "+(l.response.data?.message||d("common.validationError"))):k.error(d("api.saveHealthAlertFailed"))}},closeModal:()=>{S.value=!1,b.value=!1,r.healthId=0,r.pid=0,r.healthType="",r.checkDate="",r.reminderTime=void 0,r.status="attention",r.description=""},initializeHealthAlerts:async()=>{console.log("å¼€å§‹åˆå§‹åŒ–å¥åº·æé†’æ•°æ®"),await L(),console.log("å® ç‰©æ•°æ®åŠ è½½å®Œæˆ:",v.value),v.value.length>0?(await D(),console.log("å¥åº·æé†’æ•°æ®åŠ è½½å®Œæˆ:",o.value)):(console.log("æ²¡æœ‰å® ç‰©æ•°æ®ï¼Œä¸åŠ è½½å¥åº·æé†’"),o.value=[]),console.log("initializeHealthAlerts: åˆå§‹åŒ–å®Œæˆï¼Œå® ç‰©æ•°é‡:",v.value.length,"å¥åº·æé†’æ•°é‡:",o.value.length)},getStatusClass:l=>{const s=l==="pending"?"pending":l==="attention"?"attention":l;return{expired:s==="expired",reminded:s==="reminded",pending:s==="pending",attention:s==="attention"}},getHealthTypeLabel:l=>l?{VACCINE:d("healthAlerts.vaccine"),CHECKUP:d("healthAlerts.checkup"),SURGERY:d("healthAlerts.surgery"),DISEASE:d("healthAlerts.disease")}[l]||l:d("healthAlerts.noType","æœªåˆ†ç±»"),getStatusLabel:l=>l?{pending:d("healthAlerts.pending","å¾…å¤„ç†"),attention:d("healthAlerts.attention"),expired:d("healthAlerts.expired"),reminded:d("healthAlerts.reminded","å·²æé†’"),completed:d("healthAlerts.completed","å·²å®Œæˆ")}[l]||l:d("healthAlerts.unknown","æœªçŸ¥"),formatDate:l=>{if(!l)return"æœªè®¾ç½®";try{const s=new Date(l);return isNaN(s.getTime())?l:s.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return l}},editAlert:l=>{r.healthId=l.healthId||l.hid||0,r.pid=Number(l.pid)||0,r.healthType=l.healthType||l.alertType||"",r.checkDate=(l.checkDate||"").replace(" ","T"),r.reminderTime=(l.reminderTime||"").replace(" ","T"),r.status=l.status||"attention",r.description=l.description||l.content||"",b.value=!0},getPetName:l=>{const s=v.value.find(f=>f.pid===l);return s?s.name:"æœªçŸ¥å® ç‰©"}}},ue=()=>{const{t:d}=te(),o=A(null),v=A(!1),y=A(null),_=A(0),I=5,T=A(""),E=A(""),S=V(()=>v.value?"connected":_.value>0?"reconnecting":"disconnected"),b=i=>{if(o.value&&o.value.readyState===WebSocket.OPEN){console.log("WebSocketå·²è¿žæŽ¥ï¼Œæ— éœ€é‡å¤è¿žæŽ¥");return}E.value=i;const c=window.location.protocol==="https:"?"wss:":"ws:",h=window.location.host,R=h.includes("trycloudflare.com")||h.includes("localhost")===!1;let $="";R?($=`${c}//warned-really-recorded-pop.trycloudflare.com/ws/${i}`,console.log("æ£€æµ‹åˆ°å†…ç½‘ç©¿é€çŽ¯å¢ƒï¼Œä½¿ç”¨ç›´æŽ¥è¿žæŽ¥æ–¹å¼")):($=`${c}//${h}/api/ws/${i}`,console.log("æ£€æµ‹åˆ°æœ¬åœ°å¼€å‘çŽ¯å¢ƒï¼Œä½¿ç”¨ä»£ç†è¿žæŽ¥æ–¹å¼")),T.value=$,console.log(`WebSocketè¿žæŽ¥URL: ${T.value}`);try{o.value=new WebSocket(T.value),o.value.onopen=()=>{console.log("WebSocketè¿žæŽ¥å·²å»ºç«‹"),v.value=!0,_.value=0,y.value&&(clearTimeout(y.value),y.value=null)},o.value.onmessage=w=>{console.log("æ”¶åˆ°WebSocketæ¶ˆæ¯:",w.data),r(w.data)},o.value.onclose=()=>{console.log("WebSocketè¿žæŽ¥å·²å…³é—­"),v.value=!1,o.value=null,M()},o.value.onerror=w=>{console.error("WebSocketè¿žæŽ¥é”™è¯¯:",w),v.value=!1}}catch(w){console.error("åˆ›å»ºWebSocketè¿žæŽ¥å¤±è´¥:",w),M()}},r=i=>{console.log("å¤„ç†WebSocketæ¶ˆæ¯:",i),i.includes("å¥åº·æé†’")||i.includes("å¥åº·å‘Šè­¦")?(g(i),z(i)):i.includes("å¯„å…»")||i.includes("é¢†å…»")?q(i):Z.info({title:d("common.notification"),message:i,duration:5e3,position:"top-right"}),P(i)},g=i=>{Z.warning({title:"å¥åº·æé†’",message:i,duration:0,position:"top-right",showClose:!0,customClass:"health-alert-notification",onClose:()=>{console.log("å¥åº·æé†’é€šçŸ¥å·²å…³é—­"),W(i)}})},q=i=>{Z.info({title:"å® ç‰©æŠ¤ç†æé†’",message:i,duration:8e3,position:"top-right",showClose:!0,customClass:"pet-care-notification"})},P=i=>{try{const c=F(),h={id:Date.now(),message:i,timestamp:new Date().toISOString(),type:D(i),read:!1};c.unshift(h),c.length>100&&c.splice(100),localStorage.setItem("websocket-messages",JSON.stringify(c))}catch(c){console.error("å­˜å‚¨WebSocketæ¶ˆæ¯å¤±è´¥:",c)}},z=i=>{try{const c=H(),h={hid:Date.now(),pid:L(i)||0,alertType:B(i)||"GENERAL",time:new Date().toISOString(),content:i,status:"attention"};c.unshift(h),c.length>50&&c.splice(50),localStorage.setItem("health_alerts",JSON.stringify(c))}catch(c){console.error("å­˜å‚¨å¥åº·æé†’æ¶ˆæ¯å¤±è´¥:",c)}},F=()=>{try{const i=localStorage.getItem("websocket-messages");return i?JSON.parse(i):[]}catch(i){return console.error("èŽ·å–å­˜å‚¨çš„æ¶ˆæ¯å¤±è´¥:",i),[]}},H=()=>{try{const i=localStorage.getItem("health_alerts");return i?JSON.parse(i):[]}catch(i){return console.error("èŽ·å–å­˜å‚¨çš„å¥åº·æé†’å¤±è´¥:",i),[]}},U=i=>{try{console.log("åŒæ­¥å¥åº·æé†’åˆ°æœ¬åœ°å­˜å‚¨ï¼ŒåŽŸå§‹æ•°æ®:",i);const c=i.map((h,R)=>(console.log(`
å¤„ç†ç¬¬ ${R+1} æ¡è®°å½•:`,{healthId:h.healthId,reminderTime:h.reminderTime,checkDate:h.checkDate,status:h.status,description:h.description}),{healthId:h.healthId,hid:h.hid||h.healthId,pid:h.pid,checkDate:h.checkDate,healthType:h.healthType,description:h.description,reminderTime:h.reminderTime,status:h.status,createdAt:h.createdAt,updatedAt:h.updatedAt,time:h.checkDate||h.time,content:h.description||h.content,alertType:h.healthType||h.alertType}));return console.log("å‚¨å­˜çš„å¥åº·æé†’æ ¼å¼:",c),localStorage.setItem("health_alerts",JSON.stringify(c)),c}catch(c){return console.error("åŒæ­¥å¥åº·æé†’åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥:",c),[]}},W=i=>{try{const c=H(),h=c.find(R=>R.content===i);h&&(h.status="reminded"),localStorage.setItem("health_alerts",JSON.stringify(c))}catch(c){console.error("æ ‡è®°å¥åº·æé†’ä¸ºå·²è¯»å¤±è´¥:",c)}},D=i=>i.includes("å¥åº·æé†’")||i.includes("å¥åº·å‘Šè­¦")?"health":i.includes("å¯„å…»")?"foster":i.includes("é¢†å…»")?"adoption":"general",L=i=>{const c=i.match(/å® ç‰©\s*(\d+)/);return c?parseInt(c[1]):null},B=i=>i.includes("ç–«è‹—")?"VACCINE":i.includes("ä½“æ£€")?"CHECKUP":i.includes("æ‰‹æœ¯")?"SURGERY":i.includes("ç–¾ç—…")?"DISEASE":"GENERAL",M=()=>{if(_.value>=I){console.log("WebSocketé‡è¿žæ¬¡æ•°å·²è¾¾ä¸Šé™ï¼Œåœæ­¢é‡è¿ž");return}_.value++;const i=Math.min(1e3*Math.pow(2,_.value),3e4);console.log(`WebSocketå°†åœ¨ ${i}ms åŽå°è¯•ç¬¬ ${_.value} æ¬¡é‡è¿ž`),y.value=window.setTimeout(()=>{E.value&&b(E.value)},i)},J=()=>{y.value&&(clearTimeout(y.value),y.value=null),o.value&&(o.value.close(),o.value=null),v.value=!1,_.value=0},X=i=>{o.value&&o.value.readyState===WebSocket.OPEN?(o.value.send(i),console.log("å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨:",i)):console.error("WebSocketæœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€æ¶ˆæ¯")};return le(()=>{J()}),{ws:o,isConnected:v,connectionStatus:S,createWebSocketConnection:b,closeWebSocketConnection:J,sendMessage:X,getStoredMessages:F,getStoredHealthAlerts:H,markHealthAlertAsRead:W,syncHealthAlertsToStorage:U}},pe={class:"page-header"},me={class:"stats-grid"},ve={class:"stat-card total"},ge={class:"stat-content"},fe={class:"stat-card attention"},Ae={class:"stat-content"},ye={class:"stat-card expired"},_e={class:"stat-content"},Se={class:"stat-card reminded"},ke={class:"stat-content"},Te={class:"controls-section"},we={class:"filter-group"},be={value:""},De=["value"],Ce={value:""},Ie={value:"VACCINE"},Ee={value:"CHECKUP"},He={value:"SURGERY"},Me={value:"DISEASE"},Ne={value:""},xe={value:"pending"},Re={value:"attention"},Pe={value:"expired"},Ue={value:"reminded"},We={class:"alerts-section"},Le={class:"section-header"},Ve={class:"view-toggle"},Fe={key:0,class:"alerts-list"},$e={class:"alert-header"},Oe={class:"pet-info"},qe={key:1,class:"health-type unclassified"},ze={class:"alert-content"},Be={class:"description"},Je={class:"alert-meta"},Ye={class:"check-date"},Ge={key:0,class:"reminder-time"},Ke={key:1,class:"updated-time"},je={class:"alert-actions"},Xe=["onClick"],Ze=["onClick"],Qe={key:1,class:"empty-state"},et={key:2,class:"timeline-view"},tt={class:"timeline"},st={class:"timeline-date"},lt={class:"timeline-items"},ot={class:"timeline-content"},at={class:"timeline-header"},nt={key:1,class:"health-type unclassified"},it={class:"description"},rt={class:"timeline-status"},ct={key:0,class:"timeline-reminder"},dt={key:3,class:"empty-state"},ht={class:"modal-header"},ut={class:"form-group"},pt={value:""},mt=["value"],vt={class:"form-group"},gt={value:""},ft={value:"VACCINE"},At={value:"CHECKUP"},yt={value:"SURGERY"},_t={value:"DISEASE"},St={class:"form-group"},kt={class:"form-group"},Tt={value:"attention"},wt={value:"expired"},bt={value:"reminded"},Dt={class:"form-group"},Ct=["placeholder"],It={key:0,class:"form-group"},Et={class:"form-help"},Ht={class:"modal-actions"},Mt={type:"submit",class:"save-btn"},Nt={__name:"Health",setup(d){const{t:o}=te(),v=ce(),{healthAlerts:y,pets:_,selectedPet:I,selectedHealthType:T,selectedStatus:E,viewMode:S,showAddModal:b,showEditModal:r,formData:g,totalAlerts:q,attentionAlerts:P,expiredAlerts:z,remindedAlerts:F,filteredAlerts:H,groupedAlerts:U,getPetName:W,getHealthTypeLabel:D,getStatusLabel:L,getStatusClass:B,formatDate:M,editAlert:J,deleteAlert:X,saveAlert:i,closeModal:c,initializeHealthAlerts:h}=he(),{createWebSocketConnection:R,closeWebSocketConnection:$,syncHealthAlertsToStorage:w}=ue();return ne(async()=>{await h(),w(y.value);const l=re();l.info.userId&&R(l.info.userId)}),ie(y,l=>{console.log("å¥åº·æé†’æ•°æ®å˜åŒ–ï¼ŒåŒæ­¥åˆ°æœ¬åœ°å­˜å‚¨ï¼Œæ–°æ•°é‡:",l.length),w(l)},{deep:!0}),le(()=>{$()}),(l,s)=>(m(),p("div",{class:x(["health-alerts-container",{"dark-theme":t(v).preferences.theme==="dark"}])},[e("div",pe,[e("h1",null,n(t(o)("healthAlerts.pageTitle")),1),e("p",null,n(t(o)("healthAlerts.description")),1)]),e("div",me,[e("div",ve,[s[17]||(s[17]=e("div",{class:"stat-icon"},"ðŸ“„",-1)),e("div",ge,[e("h3",null,n(t(q)),1),e("p",null,n(t(o)("healthAlerts.totalRecords")),1)])]),e("div",fe,[s[18]||(s[18]=e("div",{class:"stat-icon"},"âš ï¸",-1)),e("div",Ae,[e("h3",null,n(t(P).length),1),e("p",null,n(t(o)("healthAlerts.attentionStatus")),1)])]),e("div",ye,[s[19]||(s[19]=e("div",{class:"stat-icon"},"â°",-1)),e("div",_e,[e("h3",null,n(t(z).length),1),e("p",null,n(t(o)("healthAlerts.expiredStatus")),1)])]),e("div",Se,[s[20]||(s[20]=e("div",{class:"stat-icon"},"ðŸ””",-1)),e("div",ke,[e("h3",null,n(t(F).length),1),e("p",null,n(t(o)("healthAlerts.remindedStatus")),1)])])]),e("div",Te,[e("div",we,[N(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>Q(I)?I.value=a:null),class:"filter-select"},[e("option",be,n(t(o)("healthAlerts.allPets")),1),(m(!0),p(G,null,K(t(_),a=>(m(),p("option",{key:a.pid,value:a.pid},n(a.name),9,De))),128))],512),[[O,t(I)]]),N(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>Q(T)?T.value=a:null),class:"filter-select"},[e("option",Ce,n(t(o)("healthAlerts.allTypes")),1),e("option",Ie,n(t(o)("healthAlerts.vaccine")),1),e("option",Ee,n(t(o)("healthAlerts.checkup")),1),e("option",He,n(t(o)("healthAlerts.surgery")),1),e("option",Me,n(t(o)("healthAlerts.disease")),1)],512),[[O,t(T)]]),N(e("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>Q(E)?E.value=a:null),class:"filter-select"},[e("option",Ne,n(t(o)("healthAlerts.allStatus")),1),e("option",xe,n(t(o)("healthAlerts.pending")),1),e("option",Re,n(t(o)("healthAlerts.attention")),1),e("option",Pe,n(t(o)("healthAlerts.expired")),1),e("option",Ue,n(t(o)("healthAlerts.reminded")),1)],512),[[O,t(E)]])]),e("button",{class:"add-button",onClick:s[3]||(s[3]=()=>{t(c)(),b.value=!0})},[s[21]||(s[21]=e("span",null,"+",-1)),C(" "+n(t(o)("healthAlerts.addHealthRecord")),1)])]),e("div",We,[e("div",Le,[e("h2",null,n(t(o)("healthAlerts.title")),1),e("div",Ve,[e("button",{class:x({active:t(S)==="list"}),onClick:s[4]||(s[4]=a=>S.value="list")},n(t(o)("healthAlerts.listView")),3),e("button",{class:x({active:t(S)==="timeline"}),onClick:s[5]||(s[5]=a=>S.value="timeline")},n(t(o)("healthAlerts.timelineView")),3)])]),t(S)==="list"&&t(H).length>0?(m(),p("div",Fe,[(m(!0),p(G,null,K(t(H),a=>(m(),p("div",{key:a.healthId||a.hid,class:x(["alert-card",t(B)(a.status)])},[e("div",$e,[e("div",Oe,[e("h4",null,n(t(W)(a.pid)),1),a.healthType||a.alertType?(m(),p("span",{key:0,class:x(["health-type",(a.healthType||a.alertType||"").toLowerCase()])},n(t(D)(a.healthType||a.alertType)),3)):(m(),p("span",qe,n(t(D)(null)),1))]),e("div",{class:x(["alert-status",(a.status||"").toLowerCase()])},n(t(L)(a.status)),3)]),e("div",ze,[e("p",Be,n(a.description||"(æœªå¡«å†™)"),1),e("div",Je,[e("span",Ye,[e("strong",null,n(t(o)("healthAlerts.checkTime"))+":",1),C(" "+n(t(M)(a.checkDate)),1)]),a.reminderTime?(m(),p("span",Ge,[e("strong",null,n(t(o)("healthAlerts.reminderTime"))+":",1),C(" "+n(t(M)(a.reminderTime)),1)])):Y("",!0),a.updatedAt&&a.updatedAt!==a.checkDate?(m(),p("span",Ke,[e("strong",null,n(t(o)("records.updatedAt"))+":",1),C(" "+n(t(M)(a.updatedAt)),1)])):Y("",!0)])]),e("div",je,[e("button",{class:"action-btn edit-btn",onClick:f=>t(J)(a)},n(t(o)("healthAlerts.editRecord")),9,Xe),e("button",{class:"action-btn delete-btn",onClick:f=>t(X)(a.healthId||a.hid)},n(t(o)("healthAlerts.deleteRecord")),9,Ze)])],2))),128))])):t(S)==="list"&&t(H).length===0?(m(),p("div",Qe,[e("p",null,"ðŸ“„ "+n(t(o)("healthAlerts.noRecords")),1)])):t(S)==="timeline"&&Object.keys(t(U)).length>0?(m(),p("div",et,[e("div",tt,[(m(!0),p(G,null,K(t(U),(a,f)=>(m(),p("div",{key:f,class:"timeline-group"},[e("div",st,n(t(M)(f)),1),e("div",lt,[(m(!0),p(G,null,K(a,u=>(m(),p("div",{key:u.healthId||u.hid,class:x(["timeline-item",t(B)(u.status)])},[s[22]||(s[22]=e("div",{class:"timeline-marker"},null,-1)),e("div",ot,[e("div",at,[e("h4",null,n(t(W)(u.pid)),1),u.healthType||u.alertType?(m(),p("span",{key:0,class:x(["health-type",(u.healthType||u.alertType||"").toLowerCase()])},n(t(D)(u.healthType||u.alertType)),3)):(m(),p("span",nt,n(t(D)(null)),1))]),e("p",it,n(u.description||t(o)("common.noData")),1),e("div",rt,[e("span",{class:x((u.status||"").toLowerCase())},n(t(L)(u.status)),3)]),u.reminderTime?(m(),p("div",ct,[e("strong",null,n(t(o)("healthAlerts.reminderTime"))+":",1),C(" "+n(t(M)(u.reminderTime)),1)])):Y("",!0)])],2))),128))])]))),128))])])):(m(),p("div",dt,[e("p",null,"ðŸ“„ "+n(t(o)("healthAlerts.noRecords")),1)]))]),t(b)||t(r)?(m(),p("div",{key:0,class:"modal-overlay",onClick:s[16]||(s[16]=(...a)=>t(c)&&t(c)(...a))},[e("div",{class:"modal-content",onClick:s[15]||(s[15]=se(()=>{},["stop"]))},[e("div",ht,[e("h3",null,n(t(r)?t(o)("healthAlerts.editHealthRecord"):t(o)("healthAlerts.addHealthRecord")),1),e("button",{class:"close-btn",onClick:s[6]||(s[6]=(...a)=>t(c)&&t(c)(...a))},"Ã—")]),e("form",{onSubmit:s[14]||(s[14]=se((...a)=>t(i)&&t(i)(...a),["prevent"])),class:"modal-form"},[e("div",ut,[e("label",null,[C(n(t(o)("healthAlerts.petName")),1),s[23]||(s[23]=e("span",{class:"required"},"*",-1))]),N(e("select",{"onUpdate:modelValue":s[7]||(s[7]=a=>t(g).pid=a),required:"",class:"form-select"},[e("option",pt,n(t(o)("healthAlerts.selectPet")),1),(m(!0),p(G,null,K(t(_),a=>(m(),p("option",{key:a.pid,value:a.pid},n(a.name),9,mt))),128))],512),[[O,t(g).pid]])]),e("div",vt,[e("label",null,[C(n(t(o)("healthAlerts.healthType")),1),s[24]||(s[24]=e("span",{class:"required"},"*",-1))]),N(e("select",{"onUpdate:modelValue":s[8]||(s[8]=a=>t(g).healthType=a),required:"",class:"form-select"},[e("option",gt,n(t(o)("healthAlerts.selectType")),1),e("option",ft,n(t(o)("healthAlerts.vaccine")),1),e("option",At,n(t(o)("healthAlerts.checkup")),1),e("option",yt,n(t(o)("healthAlerts.surgery")),1),e("option",_t,n(t(o)("healthAlerts.disease")),1)],512),[[O,t(g).healthType]])]),e("div",St,[e("label",null,[C(n(t(o)("healthAlerts.checkTime")),1),s[25]||(s[25]=e("span",{class:"required"},"*",-1))]),N(e("input",{type:"datetime-local","onUpdate:modelValue":s[9]||(s[9]=a=>t(g).checkDate=a),required:"",class:"form-input"},null,512),[[ee,t(g).checkDate]])]),e("div",kt,[e("label",null,[C(n(t(o)("healthAlerts.healthStatus")),1),s[26]||(s[26]=e("span",{class:"required"},"*",-1))]),N(e("select",{"onUpdate:modelValue":s[10]||(s[10]=a=>t(g).status=a),required:"",class:"form-select"},[e("option",Tt,n(t(o)("healthAlerts.attention")),1),e("option",wt,n(t(o)("healthAlerts.expired")),1),e("option",bt,n(t(o)("healthAlerts.reminded")),1)],512),[[O,t(g).status]])]),e("div",Dt,[e("label",null,[C(n(t(o)("healthAlerts.descriptionLabel")),1),s[27]||(s[27]=e("span",{class:"required"},"*",-1))]),N(e("textarea",{"onUpdate:modelValue":s[11]||(s[11]=a=>t(g).description=a),placeholder:t(o)("healthAlerts.descriptionPlaceholder"),class:"form-textarea",rows:"3"},null,8,Ct),[[ee,t(g).description]])]),t(g).status==="attention"?(m(),p("div",It,[e("label",null,n(t(o)("healthAlerts.reminderTime")),1),N(e("input",{type:"datetime-local","onUpdate:modelValue":s[12]||(s[12]=a=>t(g).reminderTime=a),class:"form-input"},null,512),[[ee,t(g).reminderTime]]),e("small",Et,n(t(o)("healthAlerts.reminderTimeHelp")),1)])):Y("",!0),e("div",Ht,[e("button",{type:"button",class:"cancel-btn",onClick:s[13]||(s[13]=(...a)=>t(c)&&t(c)(...a))},n(t(o)("healthAlerts.cancel")),1),e("button",Mt,n(t(r)?t(o)("healthAlerts.update"):t(o)("healthAlerts.save")),1)])],32)])])):Y("",!0)],2))}},Vt=de(Nt,[["__scopeId","data-v-c6174b8c"]]);export{Vt as default};
