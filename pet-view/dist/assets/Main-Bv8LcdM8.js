import{u as N}from"./user-BB2Eil3-.js";import{d as x,u as E,h as $,v as B,x as M,c as h,o as f,a as e,e as s,r as g,n as v,w as a,t as o,l as t,i as R,y as W,z as y,A as j,B as G,C as J,D as K,G as q,m as z,H,I as P,J as F,E as O,k as Q,K as I,L as X,g as b,M as Y}from"./index-CdkwbEeW.js";import{useThemeStore as L}from"./theme-B9BnWpRM.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as U}from"./dog-DzFJ_7DI.js";import"./request-AZOEAvTT.js";const Z={class:"sidebar"},ee={class:"nav-menu"},se={class:"nav-item"},te={class:"nav-section"},ae={class:"nav-section-title"},oe={class:"nav-item"},ne={key:0,class:"nav-badge"},le={class:"nav-item"},ce={class:"nav-item"},re={key:0,class:"nav-badge"},ie={class:"nav-item"},de={key:0,class:"nav-badge"},ue={class:"nav-section"},_e={class:"nav-section-title"},me={class:"nav-item"},ve={key:0,class:"nav-badge warning"},pe={class:"nav-item"},he={class:"nav-section"},fe={class:"nav-section-title"},ge={class:"nav-item"},we={class:"nav-item"},ke=x({__name:"Aside",setup(i){const l=N(),c=R(),{t:n}=E(),d=L(),u=$(0),w=$(0),p=$(0),T=$(0),r=S=>c.path===S,k=()=>{d.applyTheme()};return B(async()=>{await l.fetchProfile(),d.applyTheme(),window.addEventListener("app-rerender",()=>{k()}),M(()=>c.path,()=>{k()},{immediate:!0})}),(S,V)=>{const _=g("el-icon"),m=g("router-link"),D=g("Plus");return f(),h("aside",Z,[e("nav",ee,[e("div",se,[s(m,{to:"/user",class:v(["nav-link",{active:r("/user")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(W))]),_:1}),e("span",null,o(t(n)("nav.home")),1)]),_:1},8,["class"])]),e("div",te,[e("div",ae,o(t(n)("nav.petManagement")),1),e("div",oe,[s(m,{to:"/user/pets",class:v(["nav-link",{active:r("/user/pets")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(j))]),_:1}),e("span",null,o(t(n)("nav.myPets")),1),u.value>0?(f(),h("span",ne,o(u.value),1)):y("",!0)]),_:1},8,["class"])]),e("div",le,[s(m,{to:"/user/adoption-pets",class:v(["nav-link",{active:r("/user/adoption-pets")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(D)]),_:1}),e("span",null,o(t(n)("nav.addPet")),1)]),_:1},8,["class"])]),e("div",ce,[s(m,{to:"/user/adoptions",class:v(["nav-link",{active:r("/user/adoptions")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(G))]),_:1}),e("span",null,o(t(n)("nav.adoptionRecords")),1),u.value>0?(f(),h("span",re,o(w.value),1)):y("",!0)]),_:1},8,["class"])]),e("div",ie,[s(m,{to:"/user/fosters",class:v(["nav-link",{active:r("/user/fosters")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(J))]),_:1}),e("span",null,o(t(n)("nav.fosteringRecords")),1),u.value>0?(f(),h("span",de,o(p.value),1)):y("",!0)]),_:1},8,["class"])])]),e("div",ue,[e("div",_e,o(t(n)("nav.healthCenter")),1),e("div",me,[s(m,{to:"/user/health-alerts",class:v(["nav-link",{active:r("/user/health-alerts")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(K))]),_:1}),e("span",null,o(t(n)("nav.healthAlerts")),1),u.value>0?(f(),h("span",ve,o(T.value),1)):y("",!0)]),_:1},8,["class"])]),e("div",pe,[s(m,{to:"/user/events",class:v(["nav-link",{active:r("/user/events")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(q))]),_:1}),e("span",null,o(t(n)("nav.regularEvents")),1)]),_:1},8,["class"])])]),e("div",he,[e("div",fe,o(t(n)("nav.userCenter")),1),e("div",ge,[s(m,{to:"/user/profile",class:v(["nav-link",{active:r("/user/profile")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(z))]),_:1}),e("span",null,o(t(n)("nav.profile")),1)]),_:1},8,["class"])]),e("div",we,[s(m,{to:"/user/settings",class:v(["nav-link",{active:r("/user/settings")}])},{default:a(()=>[s(_,null,{default:a(()=>[s(t(H))]),_:1}),e("span",null,o(t(n)("nav.settings")),1)]),_:1},8,["class"])])])])])}}}),Se=A(ke,[["__scopeId","data-v-88f29906"]]),$e="/pet.png",ye=()=>{const i=Q(),{t:l}=E(),c=N(),n=p=>{switch(p){case"profile":i.push("/user/profile");break;case"settings":i.push("/user/settings");break;case"logout":d();break}},d=async()=>{try{await F.confirm(l("common.logoutConfirm"),l("common.logout"),{confirmButtonText:l("common.confirm"),cancelButtonText:l("common.cancel"),type:"warning"}),localStorage.removeItem("jwt_token"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userId"),localStorage.removeItem("rememberedUsername"),localStorage.removeItem("rememberedPassword"),localStorage.removeItem("userInfo"),localStorage.removeItem("userName"),localStorage.removeItem("headPic"),localStorage.removeItem("email"),localStorage.removeItem("phone"),localStorage.removeItem("introduce"),c.resetUser(),O.success(l("common.logoutSuccess")),i.push("/login")}catch{console.log("用户取消登出")}},u=P(()=>c.info.userName),w=P(()=>c.info.headPic);return{handleCommand:n,logout:d,headPic:w,userName:u}},Ie={class:"top-header"},be={class:"header-left"},Ce={class:"logo"},Pe=["alt"],Ne={class:"header-right"},xe={class:"user-dashboard"},Ee={class:"user-info-trigger"},Ae={class:"user-avatar"},Te=["src","alt"],Ue={class:"user-info"},Be={class:"username"},Me={class:"user-dropdown-header"},Re={class:"user-avatar-large"},ze=["src","alt"],He={class:"user-details"},Le={class:"username"},Ve=x({__name:"Header",setup(i){const{t:l}=E(),{handleCommand:c,headPic:n,userName:d}=ye(),u=p=>{p.target.src=U},w=P(()=>n.value&&(n.value.startsWith("http://")||n.value.startsWith("https://"))?n.value:U);return(p,T)=>{const r=g("el-dropdown-item"),k=g("el-dropdown-menu"),S=g("el-dropdown");return f(),h("header",Ie,[e("div",be,[e("div",Ce,[e("img",{src:$e,alt:t(l)("common.appName")},null,8,Pe),e("span",null,o(t(l)("common.appName")),1)])]),e("div",Ne,[e("div",xe,[s(S,{onCommand:t(c),placement:"bottom-end"},{dropdown:a(()=>[s(k,{class:"user-dropdown-menu"},{default:a(()=>[e("div",Me,[e("div",Re,[e("img",{src:w.value,alt:t(d),loading:"lazy",onError:u},null,40,ze)]),e("div",He,[e("div",Le,o(t(d)),1)])]),s(r,{command:"profile"},{default:a(()=>[s(t(I),null,{default:a(()=>[s(t(z))]),_:1}),b(" "+o(t(l)("user.profile")),1)]),_:1}),s(r,{command:"settings"},{default:a(()=>[s(t(I),null,{default:a(()=>[s(t(H))]),_:1}),b(" "+o(t(l)("settings.title")),1)]),_:1}),s(r,{divided:"",command:"logout"},{default:a(()=>[s(t(I),null,{default:a(()=>[s(t(Y))]),_:1}),b(" "+o(t(l)("common.logout")),1)]),_:1})]),_:1})]),default:a(()=>[e("div",Ee,[e("div",Ae,[e("img",{src:w.value,alt:t(d),loading:"lazy",onError:u},null,40,Te)]),e("div",Ue,[e("span",Be,o(t(d)),1)]),s(t(I),{class:"dropdown-icon"},{default:a(()=>[s(t(X))]),_:1})])]),_:1},8,["onCommand"])])])])}}}),De=A(Ve,[["__scopeId","data-v-b4fd10f0"]]),C=i=>{i.applyTheme()},We=()=>{const i=N(),l=R(),c=L();return B(async()=>{await i.fetchProfile(),c.applyTheme(),window.addEventListener("app-rerender",()=>{C(c)}),M(()=>l.path,()=>{C(c)},{immediate:!0})}),{userStore:i,route:l,themeStore:c,forceUpdateNavState:()=>C(c)}},je={class:"user-layout"},Ge={class:"layout-container"},Je={class:"sidebar-container"},Ke={class:"main-content"},qe={class:"content-wrapper"},Fe=x({__name:"Main",setup(i){return We(),(l,c)=>{const n=g("router-view");return f(),h("div",je,[s(De),e("div",Ge,[e("aside",Je,[s(Se)]),e("main",Ke,[e("div",qe,[s(n)])])])])}}}),ss=A(Fe,[["__scopeId","data-v-0086b3ec"]]);export{ss as default};
