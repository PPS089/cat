import{u as N}from"./user-CgNrBVWj.js";import{d as x,u as I,h as $,k as B,x as M,c as h,o as f,a as e,e as s,r as g,n as m,w as a,t as o,m as t,i as R,y as D,z as k,A as G,B as J,C as K,D as j,G as q,p as U,H as z,_ as P,I as A,J as F,E as O,l as Q,K as y,L as W,g as S,M as X}from"./index-C-QPrTeL.js";import{useThemeStore as H}from"./theme-DZbca66G.js";import"./request-C9ntlt9z.js";const Y={class:"sidebar"},Z={class:"nav-menu"},ee={class:"nav-item"},se={class:"nav-section"},te={class:"nav-section-title"},ae={class:"nav-item"},oe={key:0,class:"nav-badge"},ne={class:"nav-item"},ce={class:"nav-item"},le={key:0,class:"nav-badge"},ie={class:"nav-item"},de={key:0,class:"nav-badge"},re={class:"nav-section"},ue={class:"nav-section-title"},_e={class:"nav-item"},me={key:0,class:"nav-badge warning"},ve={class:"nav-item"},pe={class:"nav-section"},he={class:"nav-section-title"},fe={class:"nav-item"},ge={class:"nav-item"},we=x({__name:"Aside",setup(i){const c=N(),l=R(),{t:n}=I(),r=H(),v=$(0),w=$(0),p=$(0),C=$(0),d=T=>l.path===T,E=()=>{r.applyTheme()};return B(async()=>{await c.fetchProfile(),r.applyTheme(),window.addEventListener("app-rerender",()=>{E()}),M(()=>l.path,()=>{E()},{immediate:!0})}),(T,L)=>{const u=g("el-icon"),_=g("router-link"),V=g("Plus");return f(),h("aside",Y,[e("nav",Z,[e("div",ee,[s(_,{to:"/user",class:m(["nav-link",{active:d("/user")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(D))]),_:1}),e("span",null,o(t(n)("nav.home")),1)]),_:1},8,["class"])]),e("div",se,[e("div",te,o(t(n)("nav.petManagement")),1),e("div",ae,[s(_,{to:"/user/pets",class:m(["nav-link",{active:d("/user/pets")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(G))]),_:1}),e("span",null,o(t(n)("nav.myPets")),1),v.value>0?(f(),h("span",oe,o(v.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ne,[s(_,{to:"/user/adoption-pets",class:m(["nav-link",{active:d("/user/adoption-pets")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(V)]),_:1}),e("span",null,o(t(n)("nav.addPet")),1)]),_:1},8,["class"])]),e("div",ce,[s(_,{to:"/user/adoptions",class:m(["nav-link",{active:d("/user/adoptions")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(J))]),_:1}),e("span",null,o(t(n)("nav.adoptionRecords")),1),v.value>0?(f(),h("span",le,o(w.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ie,[s(_,{to:"/user/fosters",class:m(["nav-link",{active:d("/user/fosters")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(K))]),_:1}),e("span",null,o(t(n)("nav.fosteringRecords")),1),v.value>0?(f(),h("span",de,o(p.value),1)):k("",!0)]),_:1},8,["class"])])]),e("div",re,[e("div",ue,o(t(n)("nav.healthCenter")),1),e("div",_e,[s(_,{to:"/user/health-alerts",class:m(["nav-link",{active:d("/user/health-alerts")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(j))]),_:1}),e("span",null,o(t(n)("nav.healthAlerts")),1),v.value>0?(f(),h("span",me,o(C.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ve,[s(_,{to:"/user/events",class:m(["nav-link",{active:d("/user/events")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(q))]),_:1}),e("span",null,o(t(n)("nav.regularEvents")),1)]),_:1},8,["class"])])]),e("div",pe,[e("div",he,o(t(n)("nav.userCenter")),1),e("div",fe,[s(_,{to:"/user/profile",class:m(["nav-link",{active:d("/user/profile")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(U))]),_:1}),e("span",null,o(t(n)("nav.profile")),1)]),_:1},8,["class"])]),e("div",ge,[s(_,{to:"/user/settings",class:m(["nav-link",{active:d("/user/settings")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(z))]),_:1}),e("span",null,o(t(n)("nav.settings")),1)]),_:1},8,["class"])])])])])}}}),$e=P(we,[["__scopeId","data-v-0f97c069"]]),ke="/pet.png",ye=()=>{const i=Q(),{t:c}=I(),l=N(),n=p=>{switch(p){case"profile":i.push("/user/profile");break;case"settings":i.push("/user/settings");break;case"logout":r();break}},r=async()=>{try{await F.confirm(c("common.logoutConfirm"),c("common.logout"),{confirmButtonText:c("common.confirm"),cancelButtonText:c("common.cancel"),type:"warning"}),localStorage.removeItem("userInfo"),localStorage.removeItem("userId"),localStorage.removeItem("token"),O.success(c("common.logoutSuccess")),i.push("/login")}catch{console.log("用户取消登出")}},v=A(()=>l.info.userName),w=A(()=>l.info.headPic);return{handleCommand:n,logout:r,headPic:w,userName:v}},Ce={class:"top-header"},Se={class:"header-left"},be={class:"logo"},Ne=["alt"],xe={class:"header-right"},Ie={class:"user-dashboard"},Pe={class:"user-info-trigger"},Ee={class:"user-avatar"},Te=["src","alt"],Ae={class:"user-info"},Be={class:"username"},Me={class:"user-dropdown-header"},Re={class:"user-avatar-large"},Ue=["src","alt"],ze={class:"user-details"},He={class:"username"},Le=x({__name:"Header",setup(i){const{t:c}=I(),{handleCommand:l,headPic:n,userName:r}=ye();return(v,w)=>{const p=g("el-dropdown-item"),C=g("el-dropdown-menu"),d=g("el-dropdown");return f(),h("header",Ce,[e("div",Se,[e("div",be,[e("img",{src:ke,alt:t(c)("common.appName")},null,8,Ne),e("span",null,o(t(c)("common.appName")),1)])]),e("div",xe,[e("div",Ie,[s(d,{onCommand:t(l),placement:"bottom-end"},{dropdown:a(()=>[s(C,{class:"user-dropdown-menu"},{default:a(()=>[e("div",Me,[e("div",Re,[e("img",{src:t(n),alt:t(r),loading:"lazy"},null,8,Ue)]),e("div",ze,[e("div",He,o(t(r)),1)])]),s(p,{command:"profile"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(U))]),_:1}),S(" "+o(t(c)("user.profile")),1)]),_:1}),s(p,{command:"settings"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(z))]),_:1}),S(" "+o(t(c)("settings.title")),1)]),_:1}),s(p,{divided:"",command:"logout"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(X))]),_:1}),S(" "+o(t(c)("common.logout")),1)]),_:1})]),_:1})]),default:a(()=>[e("div",Pe,[e("div",Ee,[e("img",{src:t(n),alt:t(r),loading:"lazy"},null,8,Te)]),e("div",Ae,[e("span",Be,o(t(r)),1)]),s(t(y),{class:"dropdown-icon"},{default:a(()=>[s(t(W))]),_:1})])]),_:1},8,["onCommand"])])])])}}}),Ve=P(Le,[["__scopeId","data-v-fafdc40c"]]),b=i=>{i.applyTheme()},De=()=>{const i=N(),c=R(),l=H();return B(async()=>{await i.fetchProfile(),l.applyTheme(),window.addEventListener("app-rerender",()=>{b(l)}),M(()=>c.path,()=>{b(l)},{immediate:!0})}),{userStore:i,route:c,themeStore:l,forceUpdateNavState:()=>b(l)}},Ge={class:"user-layout"},Je={class:"layout-container"},Ke={class:"sidebar-container"},je={class:"main-content"},qe={class:"content-wrapper"},Fe=x({__name:"Main",setup(i){return De(),(c,l)=>{const n=g("router-view");return f(),h("div",Ge,[s(Ve),e("div",Je,[e("aside",Ke,[s($e)]),e("main",je,[e("div",qe,[s(n)])])])])}}}),Ye=P(Fe,[["__scopeId","data-v-b9914e28"]]);export{Ye as default};
