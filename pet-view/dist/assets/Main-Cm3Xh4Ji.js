import{u as N}from"./user-fUdRYWgh.js";import{d as P,u as x,h as $,v as B,x as M,c as h,o as f,a as e,e as s,r as g,n as m,w as a,t as o,l as t,i as U,y as D,z as k,A as j,B as G,C as J,D as K,G as q,m as R,H as z,_ as I,I as A,J as F,E as O,k as Q,K as y,L as W,g as b,M as X}from"./index-BrRsyrLM.js";import{useThemeStore as H}from"./theme-nJHyLohD.js";import"./request-DVyWtN3q.js";import"./dog-DzFJ_7DI.js";const Y={class:"sidebar"},Z={class:"nav-menu"},ee={class:"nav-item"},se={class:"nav-section"},te={class:"nav-section-title"},ae={class:"nav-item"},oe={key:0,class:"nav-badge"},ne={class:"nav-item"},ce={class:"nav-item"},le={key:0,class:"nav-badge"},re={class:"nav-item"},de={key:0,class:"nav-badge"},ie={class:"nav-section"},ue={class:"nav-section-title"},_e={class:"nav-item"},me={key:0,class:"nav-badge warning"},ve={class:"nav-item"},pe={class:"nav-section"},he={class:"nav-section-title"},fe={class:"nav-item"},ge={class:"nav-item"},we=P({__name:"Aside",setup(r){const c=N(),l=U(),{t:n}=x(),i=H(),v=$(0),w=$(0),p=$(0),C=$(0),d=T=>l.path===T,E=()=>{i.applyTheme()};return B(async()=>{await c.fetchProfile(),i.applyTheme(),window.addEventListener("app-rerender",()=>{E()}),M(()=>l.path,()=>{E()},{immediate:!0})}),(T,L)=>{const u=g("el-icon"),_=g("router-link"),V=g("Plus");return f(),h("aside",Y,[e("nav",Z,[e("div",ee,[s(_,{to:"/user",class:m(["nav-link",{active:d("/user")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(D))]),_:1}),e("span",null,o(t(n)("nav.home")),1)]),_:1},8,["class"])]),e("div",se,[e("div",te,o(t(n)("nav.petManagement")),1),e("div",ae,[s(_,{to:"/user/pets",class:m(["nav-link",{active:d("/user/pets")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(j))]),_:1}),e("span",null,o(t(n)("nav.myPets")),1),v.value>0?(f(),h("span",oe,o(v.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ne,[s(_,{to:"/user/adoption-pets",class:m(["nav-link",{active:d("/user/adoption-pets")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(V)]),_:1}),e("span",null,o(t(n)("nav.addPet")),1)]),_:1},8,["class"])]),e("div",ce,[s(_,{to:"/user/adoptions",class:m(["nav-link",{active:d("/user/adoptions")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(G))]),_:1}),e("span",null,o(t(n)("nav.adoptionRecords")),1),v.value>0?(f(),h("span",le,o(w.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",re,[s(_,{to:"/user/fosters",class:m(["nav-link",{active:d("/user/fosters")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(J))]),_:1}),e("span",null,o(t(n)("nav.fosteringRecords")),1),v.value>0?(f(),h("span",de,o(p.value),1)):k("",!0)]),_:1},8,["class"])])]),e("div",ie,[e("div",ue,o(t(n)("nav.healthCenter")),1),e("div",_e,[s(_,{to:"/user/health-alerts",class:m(["nav-link",{active:d("/user/health-alerts")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(K))]),_:1}),e("span",null,o(t(n)("nav.healthAlerts")),1),v.value>0?(f(),h("span",me,o(C.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ve,[s(_,{to:"/user/events",class:m(["nav-link",{active:d("/user/events")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(q))]),_:1}),e("span",null,o(t(n)("nav.regularEvents")),1)]),_:1},8,["class"])])]),e("div",pe,[e("div",he,o(t(n)("nav.userCenter")),1),e("div",fe,[s(_,{to:"/user/profile",class:m(["nav-link",{active:d("/user/profile")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(R))]),_:1}),e("span",null,o(t(n)("nav.profile")),1)]),_:1},8,["class"])]),e("div",ge,[s(_,{to:"/user/settings",class:m(["nav-link",{active:d("/user/settings")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(z))]),_:1}),e("span",null,o(t(n)("nav.settings")),1)]),_:1},8,["class"])])])])])}}}),$e=I(we,[["__scopeId","data-v-0f97c069"]]),ke="/pet.png",ye=()=>{const r=Q(),{t:c}=x(),l=N(),n=p=>{switch(p){case"profile":r.push("/user/profile");break;case"settings":r.push("/user/settings");break;case"logout":i();break}},i=async()=>{try{await F.confirm(c("common.logoutConfirm"),c("common.logout"),{confirmButtonText:c("common.confirm"),cancelButtonText:c("common.cancel"),type:"warning"}),localStorage.removeItem("jwt_token"),localStorage.removeItem("userId"),localStorage.removeItem("rememberedUsername"),localStorage.removeItem("rememberedPassword"),O.success(c("common.logoutSuccess")),r.push("/login")}catch{console.log("用户取消登出")}},v=A(()=>l.info.userName),w=A(()=>l.info.headPic);return{handleCommand:n,logout:i,headPic:w,userName:v}},Ce={class:"top-header"},be={class:"header-left"},Se={class:"logo"},Ne=["alt"],Pe={class:"header-right"},xe={class:"user-dashboard"},Ie={class:"user-info-trigger"},Ee={class:"user-avatar"},Te=["src","alt"],Ae={class:"user-info"},Be={class:"username"},Me={class:"user-dropdown-header"},Ue={class:"user-avatar-large"},Re=["src","alt"],ze={class:"user-details"},He={class:"username"},Le=P({__name:"Header",setup(r){const{t:c}=x(),{handleCommand:l,headPic:n,userName:i}=ye();return(v,w)=>{const p=g("el-dropdown-item"),C=g("el-dropdown-menu"),d=g("el-dropdown");return f(),h("header",Ce,[e("div",be,[e("div",Se,[e("img",{src:ke,alt:t(c)("common.appName")},null,8,Ne),e("span",null,o(t(c)("common.appName")),1)])]),e("div",Pe,[e("div",xe,[s(d,{onCommand:t(l),placement:"bottom-end"},{dropdown:a(()=>[s(C,{class:"user-dropdown-menu"},{default:a(()=>[e("div",Me,[e("div",Ue,[e("img",{src:t(n),alt:t(i),loading:"lazy"},null,8,Re)]),e("div",ze,[e("div",He,o(t(i)),1)])]),s(p,{command:"profile"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(R))]),_:1}),b(" "+o(t(c)("user.profile")),1)]),_:1}),s(p,{command:"settings"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(z))]),_:1}),b(" "+o(t(c)("settings.title")),1)]),_:1}),s(p,{divided:"",command:"logout"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(X))]),_:1}),b(" "+o(t(c)("common.logout")),1)]),_:1})]),_:1})]),default:a(()=>[e("div",Ie,[e("div",Ee,[e("img",{src:t(n),alt:t(i),loading:"lazy"},null,8,Te)]),e("div",Ae,[e("span",Be,o(t(i)),1)]),s(t(y),{class:"dropdown-icon"},{default:a(()=>[s(t(W))]),_:1})])]),_:1},8,["onCommand"])])])])}}}),Ve=I(Le,[["__scopeId","data-v-fafdc40c"]]),S=r=>{r.applyTheme()},De=()=>{const r=N(),c=U(),l=H();return B(async()=>{await r.fetchProfile(),l.applyTheme(),window.addEventListener("app-rerender",()=>{S(l)}),M(()=>c.path,()=>{S(l)},{immediate:!0})}),{userStore:r,route:c,themeStore:l,forceUpdateNavState:()=>S(l)}},je={class:"user-layout"},Ge={class:"layout-container"},Je={class:"sidebar-container"},Ke={class:"main-content"},qe={class:"content-wrapper"},Fe=P({__name:"Main",setup(r){return De(),(c,l)=>{const n=g("router-view");return f(),h("div",je,[s(Ve),e("div",Ge,[e("aside",Je,[s($e)]),e("main",Ke,[e("div",qe,[s(n)])])])])}}}),Ze=I(Fe,[["__scopeId","data-v-b9914e28"]]);export{Ze as default};
