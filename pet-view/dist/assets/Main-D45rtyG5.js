import{d as N,h as P,u as I,i as $,l as A,D as B,c as h,o as f,a as e,e as s,r as g,n as m,w as a,t as o,p as t,j as R,G as D,H as k,I as j,J as G,K as J,L as K,M as O,C as U,N as H,_ as x,O as M,P as Q,E as q,m as F,Q as y,R as W,g as S,S as X}from"./index-vX8o4tFx.js";import{useThemeStore as L}from"./theme-BuSJrrmb.js";const Y={class:"sidebar"},Z={class:"nav-menu"},ee={class:"nav-item"},se={class:"nav-section"},te={class:"nav-section-title"},ae={class:"nav-item"},oe={key:0,class:"nav-badge"},ne={class:"nav-item"},ce={class:"nav-item"},le={key:0,class:"nav-badge"},de={class:"nav-item"},ie={key:0,class:"nav-badge"},re={class:"nav-section"},ue={class:"nav-section-title"},_e={class:"nav-item"},me={key:0,class:"nav-badge warning"},ve={class:"nav-item"},pe={class:"nav-section"},he={class:"nav-section-title"},fe={class:"nav-item"},ge={class:"nav-item"},we=N({__name:"Aside",setup(d){const c=P(),l=R(),{t:n}=I(),r=L(),v=$(0),w=$(0),p=$(0),C=$(0),i=T=>l.path===T,E=()=>{r.applyTheme()};return A(async()=>{await c.fetchProfile(),r.applyTheme(),window.addEventListener("app-rerender",()=>{E()}),B(()=>l.path,()=>{E()},{immediate:!0})}),(T,V)=>{const u=g("el-icon"),_=g("router-link"),z=g("Plus");return f(),h("aside",Y,[e("nav",Z,[e("div",ee,[s(_,{to:"/user",class:m(["nav-link",{active:i("/user")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(D))]),_:1}),e("span",null,o(t(n)("nav.home")),1)]),_:1},8,["class"])]),e("div",se,[e("div",te,o(t(n)("nav.petManagement")),1),e("div",ae,[s(_,{to:"/user/pets",class:m(["nav-link",{active:i("/user/pets")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(j))]),_:1}),e("span",null,o(t(n)("nav.myPets")),1),v.value>0?(f(),h("span",oe,o(v.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ne,[s(_,{to:"/user/adoption-pets",class:m(["nav-link",{active:i("/user/adoption-pets")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(z)]),_:1}),e("span",null,o(t(n)("nav.addPet")),1)]),_:1},8,["class"])]),e("div",ce,[s(_,{to:"/user/adoptions",class:m(["nav-link",{active:i("/user/adoptions")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(G))]),_:1}),e("span",null,o(t(n)("nav.adoptionRecords")),1),v.value>0?(f(),h("span",le,o(w.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",de,[s(_,{to:"/user/fosters",class:m(["nav-link",{active:i("/user/fosters")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(J))]),_:1}),e("span",null,o(t(n)("nav.fosteringRecords")),1),v.value>0?(f(),h("span",ie,o(p.value),1)):k("",!0)]),_:1},8,["class"])])]),e("div",re,[e("div",ue,o(t(n)("nav.healthCenter")),1),e("div",_e,[s(_,{to:"/user/health-alerts",class:m(["nav-link",{active:i("/user/health-alerts")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(K))]),_:1}),e("span",null,o(t(n)("nav.healthAlerts")),1),v.value>0?(f(),h("span",me,o(C.value),1)):k("",!0)]),_:1},8,["class"])]),e("div",ve,[s(_,{to:"/user/events",class:m(["nav-link",{active:i("/user/events")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(O))]),_:1}),e("span",null,o(t(n)("nav.regularEvents")),1)]),_:1},8,["class"])])]),e("div",pe,[e("div",he,o(t(n)("nav.userCenter")),1),e("div",fe,[s(_,{to:"/user/profile",class:m(["nav-link",{active:i("/user/profile")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(U))]),_:1}),e("span",null,o(t(n)("nav.profile")),1)]),_:1},8,["class"])]),e("div",ge,[s(_,{to:"/user/settings",class:m(["nav-link",{active:i("/user/settings")}])},{default:a(()=>[s(u,null,{default:a(()=>[s(t(H))]),_:1}),e("span",null,o(t(n)("nav.settings")),1)]),_:1},8,["class"])])])])])}}}),$e=x(we,[["__scopeId","data-v-83d9fb36"]]),ke="/pet.png",ye=()=>{const d=F(),{t:c}=I(),l=P(),n=p=>{switch(p){case"profile":d.push("/user/profile");break;case"settings":d.push("/user/settings");break;case"logout":r();break}},r=async()=>{try{await Q.confirm(c("common.logoutConfirm"),c("common.logout"),{confirmButtonText:c("common.confirm"),cancelButtonText:c("common.cancel"),type:"warning"}),localStorage.removeItem("userInfo"),localStorage.removeItem("userId"),localStorage.removeItem("token"),q.success(c("common.logoutSuccess")),d.push("/login")}catch{console.log("用户取消登出")}},v=M(()=>l.info.userName),w=M(()=>l.info.headPic);return{handleCommand:n,logout:r,headPic:w,userName:v}},Ce={class:"top-header"},Se={class:"header-left"},be={class:"logo"},Ne=["alt"],Pe={class:"header-right"},Ie={class:"user-dashboard"},xe={class:"user-info-trigger"},Ee={class:"user-avatar"},Te=["src","alt"],Me={class:"user-info"},Ae={class:"username"},Be={class:"user-dropdown-header"},Re={class:"user-avatar-large"},Ue=["src","alt"],He={class:"user-details"},Le={class:"username"},Ve=N({__name:"Header",setup(d){const{t:c}=I(),{handleCommand:l,headPic:n,userName:r}=ye();return(v,w)=>{const p=g("el-dropdown-item"),C=g("el-dropdown-menu"),i=g("el-dropdown");return f(),h("header",Ce,[e("div",Se,[e("div",be,[e("img",{src:ke,alt:t(c)("common.appName")},null,8,Ne),e("span",null,o(t(c)("common.appName")),1)])]),e("div",Pe,[e("div",Ie,[s(i,{onCommand:t(l),placement:"bottom-end"},{dropdown:a(()=>[s(C,{class:"user-dropdown-menu"},{default:a(()=>[e("div",Be,[e("div",Re,[e("img",{src:t(n),alt:t(r),loading:"lazy"},null,8,Ue)]),e("div",He,[e("div",Le,o(t(r)),1)])]),s(p,{command:"profile"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(U))]),_:1}),S(" "+o(t(c)("user.profile")),1)]),_:1}),s(p,{command:"settings"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(H))]),_:1}),S(" "+o(t(c)("settings.title")),1)]),_:1}),s(p,{divided:"",command:"logout"},{default:a(()=>[s(t(y),null,{default:a(()=>[s(t(X))]),_:1}),S(" "+o(t(c)("common.logout")),1)]),_:1})]),_:1})]),default:a(()=>[e("div",xe,[e("div",Ee,[e("img",{src:t(n),alt:t(r),loading:"lazy"},null,8,Te)]),e("div",Me,[e("span",Ae,o(t(r)),1)]),s(t(y),{class:"dropdown-icon"},{default:a(()=>[s(t(W))]),_:1})])]),_:1},8,["onCommand"])])])])}}}),ze=x(Ve,[["__scopeId","data-v-3822bc6c"]]),b=d=>{d.applyTheme()},De=()=>{const d=P(),c=R(),l=L();return A(async()=>{await d.fetchProfile(),l.applyTheme(),window.addEventListener("app-rerender",()=>{b(l)}),B(()=>c.path,()=>{b(l)},{immediate:!0})}),{userStore:d,route:c,themeStore:l,forceUpdateNavState:()=>b(l)}},je={class:"user-layout"},Ge={class:"layout-container"},Je={class:"sidebar-container"},Ke={class:"main-content"},Oe={class:"content-wrapper"},Qe=N({__name:"Main",setup(d){return De(),(c,l)=>{const n=g("router-view");return f(),h("div",je,[s(ze),e("div",Ge,[e("aside",Je,[s($e)]),e("main",Ke,[e("div",Oe,[s(n)])])])])}}}),We=x(Qe,[["__scopeId","data-v-c05c01c1"]]);export{We as default};
