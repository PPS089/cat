import{d as z}from"./dog-DzFJ_7DI.js";import{u as E,h as q,q as U,p as $,s as I,m as S,E as h,k as C,d as A,c as M,o as N,a as n,t as p,l as e,e as r,w as s,r as _,g as x}from"./index-n6QoKQtw.js";import{s as B}from"./request-BS93o2BH.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L=()=>{const{t,locale:a}=E(),w=C(),c=q(!1),V=q(a.value),u=q({username:"",phone:"",email:"",password:"",confirmPassword:""}),v=d=>t(d),b=()=>{w.push("/login")},P={username:[{required:!0,message:t("register.usernameRequired"),trigger:"blur"}],phone:[{required:!0,message:t("register.phoneRequired"),trigger:"blur"},{validator:(d,o,l)=>{/^1[3-9]\d{9}$/.test(o)?l():l(new Error(t("register.phoneInvalid")))},trigger:"blur"}],email:[{required:!0,message:t("register.emailRequired"),trigger:"blur"},{validator:(d,o,l)=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?l():l(new Error(t("register.emailInvalid")))},trigger:"blur"}],password:[{required:!0,message:t("register.passwordRequired"),trigger:"blur"}],confirmPassword:[{required:!0,message:t("register.confirmPasswordRequired"),trigger:"blur"},{validator:(d,o,l)=>{o!==u.value.password?l(new Error(t("register.passwordMismatch"))):l()},trigger:"blur"}]};return{form:u,loading:c,currentLanguage:V,rules:P,User:S,Phone:I,Lock:$,Message:U,login:b,onSubmit:async()=>{if(c.value=!0,!/^1[3-9]\d{9}$/.test(u.value.phone)){h.error(t("register.phoneFormatError")),c.value=!1;return}if(!/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![a-z0-9]+$)\S{6,12}$/.test(u.value.password)){h.error(t("register.passwordFormatError")),c.value=!1;return}try{const d=await B.post("/user",{username:u.value.username,phone:u.value.phone,email:u.value.email,password:u.value.password});d.code===200?(h.success(t("register.success")),w.push("/login")):h.error(d.message||t("register.error"))}catch(d){h.error(d.response?.data?.message||d.message||t("register.error"))}finally{c.value=!1}},t:v}},T={class:"register-container"},Z={class:"register-card"},D={class:"register-left"},j={class:"image-container"},G={class:"image-overlay"},H={class:"welcome-title"},J={class:"welcome-subtitle"},K={class:"register-right"},O={class:"form-header"},Q={class:"form-title"},W={class:"form-subtitle"},X={class:"form-footer"},Y={class:"login-text"},ee=A({__name:"Register",setup(t){const{form:a,loading:w,rules:c,User:V,Phone:u,Lock:v,Message:b,onSubmit:P,t:i}=L();return(d,o)=>{const l=_("el-icon"),f=_("el-input"),g=_("el-form-item"),y=_("el-button"),R=_("el-form"),k=_("router-link");return N(),M("div",T,[n("div",Z,[n("div",D,[n("div",j,[o[5]||(o[5]=n("img",{src:z,alt:"宠物",class:"register-image"},null,-1)),n("div",G,[n("h1",H,p(e(i)("register.welcomeTitle")),1),n("p",J,p(e(i)("register.welcomeSubtitle")),1)])])]),n("div",K,[n("div",O,[n("h2",Q,p(e(i)("register.createAccount")),1),n("p",W,p(e(i)("register.fillInfo")),1)]),r(R,{model:e(a),rules:e(c),ref:"registerForm","label-width":"0",class:"register-form"},{default:s(()=>[r(g,{prop:"username"},{default:s(()=>[r(f,{modelValue:e(a).username,"onUpdate:modelValue":o[0]||(o[0]=m=>e(a).username=m),placeholder:e(i)("register.usernamePlaceholder"),size:"large"},{prefix:s(()=>[r(l,null,{default:s(()=>[r(e(V))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(g,{prop:"phone"},{default:s(()=>[r(f,{modelValue:e(a).phone,"onUpdate:modelValue":o[1]||(o[1]=m=>e(a).phone=m),placeholder:e(i)("register.phonePlaceholder"),size:"large"},{prefix:s(()=>[r(l,null,{default:s(()=>[r(e(u))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(g,{prop:"email"},{default:s(()=>[r(f,{modelValue:e(a).email,"onUpdate:modelValue":o[2]||(o[2]=m=>e(a).email=m),placeholder:e(i)("register.emailPlaceholder"),size:"large"},{prefix:s(()=>[r(l,null,{default:s(()=>[r(e(b))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(g,{prop:"password"},{default:s(()=>[r(f,{modelValue:e(a).password,"onUpdate:modelValue":o[3]||(o[3]=m=>e(a).password=m),type:"password",placeholder:e(i)("register.passwordPlaceholder"),size:"large","show-password":""},{prefix:s(()=>[r(l,null,{default:s(()=>[r(e(v))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(g,{prop:"confirmPassword"},{default:s(()=>[r(f,{modelValue:e(a).confirmPassword,"onUpdate:modelValue":o[4]||(o[4]=m=>e(a).confirmPassword=m),type:"password",placeholder:e(i)("register.confirmPasswordPlaceholder"),size:"large","show-password":""},{prefix:s(()=>[r(l,null,{default:s(()=>[r(e(v))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(g,null,{default:s(()=>[r(y,{type:"primary",onClick:e(P),size:"large",class:"submit-btn",loading:e(w)},{default:s(()=>[x(p(e(i)("register.submit")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),n("div",X,[n("p",Y,[x(p(e(i)("register.hasAccount"))+" ",1),r(k,{to:"/login",class:"login-link"},{default:s(()=>[x(p(e(i)("register.loginNow")),1)]),_:1})])])])])])}}}),le=F(ee,[["__scopeId","data-v-89c04cd5"]]);export{le as default};
